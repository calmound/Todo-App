# ç§’åŠ - ä»»åŠ¡ç®¡ç†å™¨

ä¸€ä¸ªåŸºäºå››è±¡é™æ³•åˆ™çš„å…¨æ ˆä»»åŠ¡ç®¡ç†åº”ç”¨ï¼Œæ”¯æŒæ—¥å†è§†å›¾ã€å­ä»»åŠ¡ç®¡ç†ã€æ•°æ®å¯¼å‡ºç­‰åŠŸèƒ½ã€‚æŠ€æœ¯æ ˆåŒ…æ‹¬ Reactã€TypeScriptã€Mantine UIã€Node.jsã€Expressã€Prismaã€SQLiteã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“‹ ä»»åŠ¡ç®¡ç†
- **Inbox æ”¶ä»¶ç®±**ï¼šå¿«é€Ÿæ”¶é›†å’Œæ•´ç†æ–°ä»»åŠ¡
- **å…¨éƒ¨ä»»åŠ¡**ï¼šæŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼Œæ”¯æŒæŒ‰çŠ¶æ€å’Œä¼˜å…ˆçº§ç­›é€‰
- **å››è±¡é™åˆ†ç±»**ï¼šåŸºäºè‰¾æ£®è±ªå¨å°”çŸ©é˜µçš„ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†
  - é‡è¦ç´§æ€¥ (IU)
  - é‡è¦ä¸ç´§æ€¥ (IN)
  - ä¸é‡è¦ç´§æ€¥ (NU)
  - ä¸é‡è¦ä¸ç´§æ€¥ (NN)

### ğŸ“… æ—¥å†è§†å›¾
- **æœˆè§†å›¾**ï¼šç›´è§‚å±•ç¤ºæ¯æœˆä»»åŠ¡åˆ†å¸ƒï¼Œæ”¯æŒå‘¨æœŸä»»åŠ¡æ˜¾ç¤º
- **å‘¨è§†å›¾**ï¼šè¯¦ç»†çš„å‘¨ä»»åŠ¡æ—¶é—´çº¿ï¼Œæ”¯æŒå…¨å¤©ä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡
- **çº¯å±•ç¤ºæ¨¡å¼**ï¼šæœˆè§†å›¾å’Œå‘¨è§†å›¾ä¸“æ³¨äºä»»åŠ¡æµè§ˆï¼Œæ— å¹²æ‰°äº¤äº’

### ğŸ”„ é«˜çº§åŠŸèƒ½
- **å­ä»»åŠ¡ç®¡ç†**ï¼šæ”¯æŒåˆ›å»ºå¤šå±‚çº§å­ä»»åŠ¡ï¼Œè‡ªåŠ¨æ˜¾ç¤ºå®Œæˆè¿›åº¦
- **å‘¨æœŸä»»åŠ¡**ï¼šæ”¯æŒè®¾ç½®ä»»åŠ¡å‘¨æœŸï¼ˆrangeStart/rangeEndï¼‰
- **å¿«é€Ÿè¾“å…¥**ï¼šä¾¿æ·çš„å¿«é€Ÿæ·»åŠ ä»»åŠ¡åŠŸèƒ½
- **å³ä¾§é¢æ¿**ï¼šè¯¦ç»†çš„ä»»åŠ¡ç¼–è¾‘é¢æ¿ï¼Œæ”¯æŒæ‰€æœ‰ä»»åŠ¡å±æ€§ä¿®æ”¹
- **æ•°æ®å¯¼å‡º**ï¼šä¸€é”®å¯¼å‡ºæ‰€æœ‰ä»»åŠ¡æ•°æ®ä¸º JSON æ ¼å¼å¤‡ä»½

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯
- **ç›´è§‚çš„ UI**ï¼šåŸºäº Mantine UI çš„ç°ä»£åŒ–ç•Œé¢
- **å®æ—¶æ›´æ–°**ï¼šä¹è§‚æ›´æ–°ç­–ç•¥ï¼Œæ“ä½œå³æ—¶å“åº”
- **é¢œè‰²ç¼–ç **ï¼šä»»åŠ¡æ ¹æ®ä¼˜å…ˆçº§å’ŒçŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - UI æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Vite** - æ„å»ºå·¥å…·
- **Mantine UI 7** - ç»„ä»¶åº“
- **@mantine/dates** - æ—¥æœŸé€‰æ‹©å™¨
- **React Router** - è·¯ç”±ç®¡ç†
- **Dayjs** - æ—¥æœŸå¤„ç†
- **@tabler/icons-react** - å›¾æ ‡åº“

### åç«¯
- **Node.js** - è¿è¡Œæ—¶
- **Express** - Web æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Prisma ORM** - æ•°æ®åº“ ORM
- **SQLite** - é»˜è®¤æ•°æ®åº“ï¼ˆå¯åˆ‡æ¢è‡³ PostgreSQL/MySQLï¼‰

### éƒ¨ç½²
- **Docker** - å®¹å™¨åŒ–
- **Docker Compose** - ç¼–æ’å·¥å…·

## ğŸ“ é¡¹ç›®ç»“æ„

```
todo-project/
â”œâ”€â”€ frontend/              # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/          # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/   # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ QuickInput/      # å¿«é€Ÿè¾“å…¥ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RightPanel/      # å³ä¾§é¢æ¿ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskDetail/      # ä»»åŠ¡è¯¦æƒ…é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskGroup/       # ä»»åŠ¡åˆ†ç»„ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ TaskItem/        # ä»»åŠ¡æ¡ç›®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/      # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ AppLayout.tsx    # åº”ç”¨ä¸»å¸ƒå±€ï¼ˆå«å¯¼å‡ºåŠŸèƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ All/      # å…¨éƒ¨ä»»åŠ¡é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Inbox/    # æ”¶ä»¶ç®±é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ Calendar/ # æ—¥å†é¡µé¢ï¼ˆæœˆè§†å›¾/å‘¨è§†å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ types/        # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ taskTree.ts      # ä»»åŠ¡æ ‘å¤„ç†
â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/              # Express åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/       # API è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ tasks.ts  # ä»»åŠ¡ç›¸å…³è·¯ç”±
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â””â”€â”€ migrations/   # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ doc/                  # æ–‡æ¡£
â”œâ”€â”€ Dockerfile           # Docker é•œåƒé…ç½®
â”œâ”€â”€ docker-compose.yml   # Docker Compose é…ç½®
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 20+
- npm æˆ– yarn

### å¼€å‘ç¯å¢ƒ

#### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

1. **å®‰è£…æ‰€æœ‰ä¾èµ–**

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
npm run install:all
```

2. **è¿è¡Œæ•°æ®åº“è¿ç§»**

```bash
npm run prisma:migrate
```

3. **å¯åŠ¨å‰åç«¯æœåŠ¡**

```bash
# ä¸€é”®åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

æœåŠ¡å¯åŠ¨åï¼š
- å‰ç«¯ï¼šhttp://localhost:5173
- åç«¯ APIï¼šhttp://localhost:3000/api

#### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨

1. **è®¾ç½®åç«¯**

```bash
cd backend
npm install

# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run prisma:migrate

# å¯åŠ¨åç«¯æœåŠ¡å™¨ (http://localhost:3000)
npm run dev
```

2. **è®¾ç½®å‰ç«¯** (åœ¨æ–°ç»ˆç«¯)

```bash
cd frontend
npm install

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
npm run dev
```

## ğŸ–¥ æ¡Œé¢ Appï¼ˆTauriï¼‰

æœ¬é¡¹ç›®æ”¯æŒæ‰“åŒ…ä¸º macOS æ¡Œé¢åº”ç”¨ï¼ˆTauriï¼‰ï¼Œå‰ç«¯ä»å¤ç”¨åŒä¸€å¥— React é¡µé¢ã€‚

### å¼€å‘è¿è¡Œ

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run tauri:dev
```

### è¿æ¥ä½ çš„æœåŠ¡ç«¯

- é»˜è®¤ä¼šè¯·æ±‚ `http://127.0.0.1:3000/api`
- è‹¥ä½ çš„åç«¯éƒ¨ç½²åœ¨å±€åŸŸç½‘/æœåŠ¡å™¨ä¸Šï¼Œæ‰“å¼€åº”ç”¨å†…ã€Œè®¾ç½®ã€é¡µï¼Œå¡«å…¥æœåŠ¡ç«¯åœ°å€ï¼ˆä¾‹å¦‚ `http://192.168.1.10:3000`ï¼‰ï¼Œä¿å­˜åç‚¹ã€Œç«‹å³åˆ·æ–°ã€æˆ–åˆ‡æ¢è·¯ç”±é‡æ–°åŠ è½½æ•°æ®

## ğŸ³ Docker éƒ¨ç½²

æœ¬é¡¹ç›®å†…ç½®å¤šé˜¶æ®µ `Dockerfile`ï¼Œé•œåƒåŒ…å«åç«¯ API ä¸å·²æ„å»ºçš„å‰ç«¯é™æ€èµ„æºã€‚å®¹å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ Prisma è¿ç§»ï¼ˆ`prisma migrate deploy`ï¼‰ï¼Œä»…åˆ›å»º/æ›´æ–°è¡¨ç»“æ„ï¼Œä¸æºå¸¦æœ¬åœ°æµ‹è¯•æ•°æ®ã€‚

### é‡è¦çº¦å®š

- é•œåƒä¸åŒ…å«æœ¬åœ° `dev.db`ï¼Œåªå¤åˆ¶ `schema.prisma` ä¸ `migrations/`
- å®¹å™¨å†…ä½¿ç”¨ `DATABASE_URL=file:/app/data/dev.db`
- æŒä¹…åŒ–æ•°æ®ç›®å½•ä¸ºå®¹å™¨å†… `/app/data`ï¼Œè¯·åŠ¡å¿…åœ¨éƒ¨ç½²æ—¶æŒ‚è½½å·æˆ–æŒ‡å‘å¤–éƒ¨æ•°æ®åº“

### 1. æœ¬åœ°æ„å»ºé•œåƒ

```bash
docker build -t todo-app:latest .
```

### 2. ç›´æ¥è¿è¡Œå®¹å™¨ï¼ˆä½¿ç”¨å®¿ä¸»æœºç›®å½•æŒä¹…åŒ–ï¼‰

```bash
mkdir -p ./data
docker run -d \
  --name todo-app \
  -p 3000:3000 \
  -v $(pwd)/data:/app/data \
  todo-app:latest

# è®¿é—® http://localhost:3000
```

> **è¯´æ˜**ï¼šDockerfile å·²è®¾ç½®é»˜è®¤ç¯å¢ƒå˜é‡ï¼ˆ`DATABASE_URL=file:/app/data/dev.db`, `PORT=3000`ï¼‰ï¼Œæ— éœ€é¢å¤–æŒ‡å®šã€‚

### 3. ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```bash
# æ„å»ºå¹¶å¯åŠ¨
npm run docker:build
npm run docker:up

# æŸ¥çœ‹æ—¥å¿—
npm run docker:logs

# åœæ­¢æœåŠ¡
npm run docker:down
```

### 4. ç”Ÿäº§éƒ¨ç½²ï¼ˆä½¿ç”¨å‘½åå·ï¼‰

åˆ›å»º `docker-compose.prod.yml`ï¼š

```yaml
version: '3.8'
services:
  app:
    image: todo-app:latest
    ports:
      - "3000:3000"
    volumes:
      - db-data:/app/data
    restart: unless-stopped

volumes:
  db-data: {}
```

> **è¯´æ˜**ï¼šç¯å¢ƒå˜é‡å·²åœ¨ Dockerfile ä¸­è®¾ç½®ï¼Œæ— éœ€é‡å¤é…ç½®ã€‚

å¯åŠ¨ï¼š

```bash
docker compose -f docker-compose.prod.yml up -d
```

### 5. ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼ˆPostgreSQL/MySQLï¼‰

å¦‚éœ€ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼Œé€šè¿‡ `-e` å‚æ•°è¦†ç›–é»˜è®¤çš„ SQLite é…ç½®ï¼š

```bash
# PostgreSQL ç¤ºä¾‹
docker run -d \
  --name todo-app \
  -p 3000:3000 \
  -e DATABASE_URL="postgresql://user:pass@host:5432/dbname?schema=public" \
  todo-app:latest

# MySQL ç¤ºä¾‹
docker run -d \
  --name todo-app \
  -p 3000:3000 \
  -e DATABASE_URL="mysql://user:pass@host:3306/dbname" \
  todo-app:latest
```

> **æ³¨æ„**ï¼šä½¿ç”¨å¤–éƒ¨æ•°æ®åº“æ—¶ä¸éœ€è¦æŒ‚è½½ `/app/data` å·ã€‚

## ğŸ“¡ API æ¥å£

### ä»»åŠ¡ç›¸å…³

- `GET /api/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨ï¼ˆæ”¯æŒæŸ¥è¯¢å‚æ•°ï¼šfrom, to, statusï¼‰
- `GET /api/tasks/all` - è·å–æ‰€æœ‰ä»»åŠ¡
- `GET /api/tasks/:id` - è·å–å•ä¸ªä»»åŠ¡è¯¦æƒ…
- `POST /api/tasks` - åˆ›å»ºæ–°ä»»åŠ¡
- `PUT /api/tasks/:id` - æ›´æ–°ä»»åŠ¡ï¼ˆå…¨é‡ï¼‰
- `PATCH /api/tasks/:id` - æ›´æ–°ä»»åŠ¡ï¼ˆéƒ¨åˆ†å­—æ®µï¼‰
- `DELETE /api/tasks/:id` - åˆ é™¤ä»»åŠ¡

### å¥åº·æ£€æŸ¥

- `GET /api/health` - æœåŠ¡å™¨å¥åº·çŠ¶æ€

## ğŸ“‹ ä»»åŠ¡æ•°æ®æ¨¡å‹

```typescript
interface Task {
  id: number;
  title: string;
  description?: string;
  date?: string;              // 'YYYY-MM-DD' ä»»åŠ¡æ—¥æœŸ
  allDay: boolean;            // æ˜¯å¦ä¸ºå…¨å¤©ä»»åŠ¡
  startTime?: string;         // 'HH:mm' å¼€å§‹æ—¶é—´
  endTime?: string;           // 'HH:mm' ç»“æŸæ—¶é—´
  rangeStart?: string;        // 'YYYY-MM-DD' å‘¨æœŸå¼€å§‹æ—¥æœŸ
  rangeEnd?: string;          // 'YYYY-MM-DD' å‘¨æœŸç»“æŸæ—¥æœŸ
  status: 'pending' | 'done'; // ä»»åŠ¡çŠ¶æ€
  quadrant?: 'IU' | 'IN' | 'NU' | 'NN'; // å››è±¡é™åˆ†ç±»
  parentId?: number;          // çˆ¶ä»»åŠ¡IDï¼ˆå­ä»»åŠ¡ï¼‰
  order?: number;             // æ’åºåºå·
  createdAt: string;          // åˆ›å»ºæ—¶é—´
  updatedAt: string;          // æ›´æ–°æ—¶é—´
}
```

### å››è±¡é™è¯´æ˜

- **IU (Important & Urgent)** - é‡è¦ç´§æ€¥ï¼šéœ€è¦ç«‹å³å¤„ç†çš„é‡è¦ä»»åŠ¡
- **IN (Important & Not Urgent)** - é‡è¦ä¸ç´§æ€¥ï¼šé‡è¦ä½†å¯ä»¥è®¡åˆ’çš„ä»»åŠ¡
- **NU (Not Important & Urgent)** - ä¸é‡è¦ç´§æ€¥ï¼šç´§æ€¥ä½†å¯ä»¥å§”æ´¾çš„ä»»åŠ¡
- **NN (Not Important & Not Urgent)** - ä¸é‡è¦ä¸ç´§æ€¥ï¼šå¯ä»¥ç¨åå¤„ç†æˆ–å–æ¶ˆçš„ä»»åŠ¡

## ğŸ”§ è„šæœ¬å‘½ä»¤

### æ ¹ç›®å½•ï¼ˆæ¨èä½¿ç”¨ï¼‰

- `npm run dev` - åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨
- `npm run install:all` - å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆæ ¹ç›®å½• + å‰ç«¯ + åç«¯ï¼‰
- `npm run build` - æ„å»ºå‰åç«¯
- `npm run prisma:migrate` - è¿è¡Œæ•°æ®åº“è¿ç§»
- `npm run prisma:studio` - æ‰“å¼€ Prisma Studio æ•°æ®åº“ç®¡ç†ç•Œé¢
- `npm run docker:build` - æ„å»º Docker é•œåƒ
- `npm run docker:up` - å¯åŠ¨ Docker å®¹å™¨
- `npm run docker:down` - åœæ­¢ Docker å®¹å™¨
- `npm run docker:logs` - æŸ¥çœ‹ Docker æ—¥å¿—

### åç«¯ï¼ˆbackendï¼‰

- `npm run dev` - å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
- `npm run build` - ç”Ÿäº§æ„å»º
- `npm start` - å¯åŠ¨ç”Ÿäº§ç¯å¢ƒæœåŠ¡
- `npm run prisma:generate` - ç”Ÿæˆ Prisma Client
- `npm run prisma:migrate` - æ‰§è¡Œæ•°æ®åº“è¿ç§»
- `npm run prisma:studio` - æ‰“å¼€ Prisma Studio

### å‰ç«¯ï¼ˆfrontendï¼‰

- `npm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `npm run build` - ç”Ÿäº§æ„å»º
- `npm run preview` - é¢„è§ˆç”Ÿäº§æ„å»º

## ğŸ’¾ æ•°æ®ç®¡ç†

### æ•°æ®å¯¼å‡º

åœ¨åº”ç”¨å³ä¸Šè§’ç‚¹å‡»å¯¼å‡ºæŒ‰é’®å³å¯ä¸‹è½½æ‰€æœ‰ä»»åŠ¡æ•°æ®çš„ JSON å¤‡ä»½æ–‡ä»¶ã€‚

å¯¼å‡ºæ–‡ä»¶æ ¼å¼ï¼š
```json
{
  "exportDate": "2025-12-13T...",
  "version": "1.0",
  "tasks": [...]
}
```

æ–‡ä»¶åæ ¼å¼ï¼š`tasks-backup-YYYY-MM-DD.json`

### æ•°æ®åº“ä½ç½®

- **å¼€å‘ç¯å¢ƒ**ï¼š`backend/prisma/dev.db`
- **Docker ç¯å¢ƒ**ï¼šå®¹å™¨å†… `/app/data/dev.db`ï¼ˆéœ€æŒ‚è½½å·æŒä¹…åŒ–ï¼‰
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šå»ºè®®ä½¿ç”¨ PostgreSQL æˆ– MySQL

## ğŸ¯ ä½¿ç”¨æŠ€å·§

1. **å¿«é€Ÿæ·»åŠ ä»»åŠ¡**ï¼šä½¿ç”¨é¡¶éƒ¨å¿«é€Ÿè¾“å…¥æ¡†å¿«é€Ÿåˆ›å»ºä»»åŠ¡
2. **å³é”®èœå•**ï¼šå³é”®ç‚¹å‡»ä»»åŠ¡å¯å¿«é€Ÿè®¾ç½®ä¼˜å…ˆçº§æˆ–åˆ é™¤
3. **åŒå‡»ç¼–è¾‘**ï¼šåŒå‡»ä»»åŠ¡æ ‡é¢˜å¯å¿«é€Ÿä¿®æ”¹
4. **å­ä»»åŠ¡ç®¡ç†**ï¼šåœ¨ä»»åŠ¡å³é”®èœå•ä¸­é€‰æ‹©"æ·»åŠ å­ä»»åŠ¡"
5. **æ‰¹é‡æ“ä½œ**ï¼šåœ¨ All é¡µé¢å¯æ‰¹é‡æ›´æ–°ä»»åŠ¡çš„å››è±¡é™åˆ†ç±»
6. **å‘¨æœŸä»»åŠ¡**ï¼šé€šè¿‡æ—¥æœŸèŒƒå›´è®¾ç½®é‡å¤å‡ºç°çš„ä»»åŠ¡

## ğŸ“„ è®¸å¯è¯

MIT License
